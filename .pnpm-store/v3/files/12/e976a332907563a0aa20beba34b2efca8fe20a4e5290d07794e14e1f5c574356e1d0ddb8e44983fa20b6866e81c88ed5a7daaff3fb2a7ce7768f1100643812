// @unocss-include
import { useStableCallback } from './useStableCallback.js';
import { useEffect, useRef } from 'react';
export function useAnimationFrame(callback, initialContext) {
    const requestRef = useRef();
    const previousTimeRef = useRef();
    const contextRef = useRef(initialContext);
    const animate = useStableCallback((time) => {
        if (previousTimeRef.current !== undefined) {
            const deltaTime = time - previousTimeRef.current;
            callback(deltaTime, contextRef.current);
        }
        previousTimeRef.current = time;
        requestRef.current = requestAnimationFrame(animate);
    });
    useEffect(() => {
        requestRef.current = requestAnimationFrame(animate);
        return () => cancelAnimationFrame(requestRef.current);
    }, [animate]);
}
//# sourceMappingURL=useAnimationFrame.js.map